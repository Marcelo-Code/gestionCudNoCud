!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2c8c73c4-b1ed-4496-b8ae-57cfe64c2c8d",e._sentryDebugIdIdentifier="sentry-dbid-2c8c73c4-b1ed-4496-b8ae-57cfe64c2c8d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5279],{66709:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-in-mfa",function(){return n(46262)}])},26463:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(59608),a=n(66409),i=n(56213),s=n(28633);async function o(){let{error:e}=await (0,s.v_)("/platform/profile/audit-login");e&&(0,s.S3)(e)}let l=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.D)(e=>o(),{async onSuccess(t,n,r){await (null==e?void 0:e(t,n,r))},async onError(e,n,a){r.Tb(Error("Failed to add login event to user's audit log",{cause:e})),void 0===t?i.Am.error("Failed to add login event: ".concat(e.message)):t(e,n,a)},...n})}},66177:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(59608),a=n(87025),i=n(66409),s=n(56213),o=n(2867),l=n(99545);let c=["Invalid TOTP code entered"],d=async e=>{let{error:t,data:n}=await o.I8.mfa.challengeAndVerify(e);if(t)throw t;return n},u=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,a.NL)();return(0,i.D)(e=>{let{refreshFactors:t,...n}=e;return d(n)},{async onSuccess(t,n,r){var a;let i=null===(a=n.refreshFactors)||void 0===a||a;await Promise.all([...i?[o.invalidateQueries(l.c.mfaFactors())]:[],o.invalidateQueries(l.c.aaLevel())]),await (null==e?void 0:e(t,n,r))},async onError(e,n,a){void 0===t?s.Am.error("Failed to sign in: ".concat(e.message)):t(e,n,a),c.some(t=>e.message.includes(t))||r.uT("[CRITICAL] Failed to sign in via MFA: "+e.message)},...n})}},18920:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(58971),a=n(2867),i=n(99545);async function s(){let{error:e,data:t}=await a.I8.mfa.listFactors();if(e)throw e;return t}let o=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.a)(i.c.mfaFactors(),()=>s(),{staleTime:18e5,...t})}},94511:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(45353).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},99699:function(e,t,n){"use strict";var r=n(31549),a=n(57672),i=n.n(a),s=n(62848),o=n(43799),l=n(32081);t.Z=e=>{var t;let{projectRef:n,subject:a,error:c,className:d,showIcon:u=!0,children:f}=e,m=null==a?void 0:a.replace(/ /g,"%20"),g="/support/new?category=dashboard_bug";n&&(g+="&ref=".concat(n)),m&&(g+="&subject=".concat(m)),c&&(g+="&error=".concat(c.message));let h=(null==c?void 0:null===(t=c.message)||void 0===t?void 0:t.includes("503"))?"503 Service Temporarily Unavailable":null==c?void 0:c.message;return(0,r.jsxs)(s.bZ,{className:d,variant:"warning",title:a,"data-sentry-element":"Alert_Shadcn_","data-sentry-component":"AlertError","data-sentry-source-file":"AlertError.tsx",children:[u&&(0,r.jsx)(o.aN,{className:"h-4 w-4",strokeWidth:2}),(0,r.jsx)(s.Cd,{className:"text-foreground","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"AlertError.tsx",children:a}),(0,r.jsxs)(s.X,{className:"flex flex-col gap-3 break-words","data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"AlertError.tsx",children:[(0,r.jsxs)("div",{children:[(null==c?void 0:c.message)&&(0,r.jsxs)("p",{className:"text-left",children:["Error: ",h]}),(0,r.jsx)("p",{className:"text-left",children:"Try refreshing your browser, but if the issue persists, please reach out to us via support."})]}),f,(0,r.jsx)(l.z,{asChild:!0,type:"warning",className:"w-min","data-sentry-element":"Button","data-sentry-source-file":"AlertError.tsx",children:(0,r.jsx)(i(),{href:g,"data-sentry-element":"Link","data-sentry-source-file":"AlertError.tsx",children:"Contact support"})})]})]})}},97339:function(e,t,n){"use strict";n.d(t,{A:function(){return c},Z:function(){return d}});var r=n(31549),a=n(88042),i=n(44194);let s=null;var o=n(16154);let l=e=>{let{className:t,delayIndex:n=0,animationDelay:l=150}=e,c=function(e){let t=(0,i.useRef)(null);return(0,a.LI)(()=>{let e=document.getAnimations().filter(e=>e instanceof CSSAnimation&&"shimmer"===e.animationName),n=e.find(e=>e.effect instanceof KeyframeEffect&&e.effect.target===t.current);if(void 0===n)return;let r=e[0];return n===r&&s&&(n.currentTime=s),n!==r&&(n.currentTime=r.currentTime),()=>{n===r&&n.currentTime&&(s=Number(n.currentTime))}},[]),t}(0);return(0,r.jsx)("div",{ref:c,className:(0,o.cn)("shimmering-loader rounded py-3",t),style:{animationFillMode:"backwards",animationDelay:"".concat(n*l,"ms")},"data-sentry-component":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"})},c=()=>(0,r.jsxs)("div",{className:"space-y-2","data-sentry-component":"GenericSkeletonLoader","data-sentry-source-file":"ShimmeringLoader.tsx",children:[(0,r.jsx)(l,{"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"}),(0,r.jsx)(l,{className:"w-3/4",delayIndex:1,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"}),(0,r.jsx)(l,{className:"w-1/2",delayIndex:2,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"})]});var d=l},46262:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(31549),a=n(87025),i=n(50378),s=n(44194),o=n(56213),l=n(88042),c=n(94511),d=n(57672),u=n.n(d),f=n(18648),m=n(99699),g=n(97339),h=n(66177),x=n(18920),y=n(27775),v=n(2867),p=n(23874),j=n(58656),w=n(32081);let L=(0,f.object)({code:(0,f.string)().required("MFA Code is required")});var b=()=>{var e;let t=(0,i.useRouter)(),n=(0,y.QJ)(),o=(0,a.NL)(),[l,d]=(0,s.useState)(null),{data:f,error:b,isError:N,isSuccess:_,isLoading:S}=(0,x.U)(),{mutate:k,isLoading:A,isSuccess:C}=(0,h.O)({onSuccess:async()=>{await o.resetQueries(),t.push((0,v.nD)())}}),E=async()=>{await n(),await t.replace("/sign-in")},I=async e=>{let{code:t}=e;l&&k({factorId:l.id,code:t,refreshFactors:!1})};return(0,s.useEffect)(()=>{_&&(0===f.totp.length&&o.resetQueries().then(()=>t.push((0,v.nD)())),f.totp.length>0&&d(f.totp[0]))},[null==f?void 0:f.totp,_,t,o]),(0,r.jsxs)(r.Fragment,{children:[S&&(0,r.jsx)(g.A,{}),N&&(0,r.jsx)(m.Z,{error:b,subject:"Failed to retrieve factors"}),_&&(0,r.jsx)(p.Z,{validateOnBlur:!0,id:"sign-in-mfa-form",initialValues:{code:""},validationSchema:L,onSubmit:I,children:()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(j.Z,{id:"code",name:"code",type:"text",autoFocus:!0,icon:(0,r.jsx)(c.Z,{}),placeholder:"XXXXXX",disabled:A,autoComplete:"off",spellCheck:"false",autoCapitalize:"none",autoCorrect:"off",label:l&&(null==f?void 0:f.totp.length)===2?"Code generated by ".concat(l.friendly_name):null}),(0,r.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,r.jsx)(w.z,{block:!0,type:"outline",size:"large",disabled:A||C,onClick:E,className:"opacity-80 hover:opacity-100 transition",children:"Cancel"}),(0,r.jsx)(w.z,{block:!0,form:"sign-in-mfa-form",htmlType:"submit",size:"large",disabled:A||C,loading:A||C,children:A?"Verifying":C?"Signing in":"Verify"})]})]})})}),(0,r.jsxs)("div",{className:"my-8",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-foreground-light",children:"Unable to sign in?"})," "]}),(0,r.jsxs)("ul",{className:"list-disc pl-6",children:[(null==f?void 0:f.totp.length)===2&&(0,r.jsx)("li",{children:(0,r.jsx)("a",{className:"text-sm text-foreground-light hover:text-foreground cursor-pointer",onClick:()=>d(f.totp.find(e=>e.id!==(null==l?void 0:l.id))),children:"Authenticate using ".concat(null===(e=f.totp.find(e=>e.id!==(null==l?void 0:l.id)))||void 0===e?void 0:e.friendly_name,"?")})}),(0,r.jsx)("li",{children:(0,r.jsx)(u(),{target:"_blank",rel:"noreferrer",href:"/support/new?subject=Unable+to+sign+in+via+MFA&category=Login_issues",className:"text-sm transition text-foreground-light hover:text-foreground","data-sentry-element":"Link","data-sentry-source-file":"SignInMfaForm.tsx",children:"Reach out to us via support"})})]})]})]})},N=n(40310),_=n(72378),S=n(26463),k=n(11931),A=n(28162),C=()=>{let e=(0,i.useRouter)(),t=(0,a.NL)(),{method:n="unknown"}=(0,l.UO)(),c=(0,A.Z)(n),{mutate:d}=(0,k.a)(),{mutate:u}=(0,S.j)(),[f,m]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{v.I8.initialize().then(async n=>{let{error:r}=n;if(r){m(!1);return}if(await (0,v.hP)()){let{data:n,error:r}=await v.I8.mfa.getAuthenticatorAssuranceLevel();if(r)return o.Am.error("Failed to retrieve assurance level: ".concat(r.message,". Please try signing in again")),m(!1),e.push({pathname:"/sign-in",query:e.query});if(n.currentLevel===n.nextLevel){d({action:"sign_in",properties:{category:"account",method:c.current}}),u({}),await t.resetQueries(),e.push((0,v.nD)());return}if(n.currentLevel!==n.nextLevel){m(!1);return}}else{let t=(0,v.lJ)("/sign-in");e.replace(t);return}}).catch(()=>{})},[]),f)?(0,r.jsx)("div",{className:"flex flex-col flex-1 bg-alternative h-screen items-center justify-center",children:(0,r.jsx)(_.Z,{})}):(0,r.jsx)(N.Z,{heading:"Two-factor authentication",subheading:"Enter the authentication code from your two-factor authentication app",logoLinkToMarketingSite:!0,"data-sentry-element":"SignInLayout","data-sentry-component":"SignInMfaPage","data-sentry-source-file":"sign-in-mfa.tsx",children:(0,r.jsx)("div",{className:"flex flex-col gap-5",children:(0,r.jsx)(b,{"data-sentry-element":"SignInMfaForm","data-sentry-source-file":"sign-in-mfa.tsx"})})})}},72378:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(31549),a=n(99799),i=n.n(a),s=()=>(0,r.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center","data-sentry-component":"LogoLoader","data-sentry-source-file":"LogoLoader.tsx",children:(0,r.jsx)("div",{children:(0,r.jsx)("svg",{width:"60",height:"62",viewBox:"0 0 60 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i().loading,"data-sentry-element":"svg","data-sentry-source-file":"LogoLoader.tsx",children:(0,r.jsx)("path",{d:"M30.2571 4.12811L30.257 4.12389C30.2133 1.21067 26.5349 -0.034778 24.7224 2.24311L1.76109 31.0996C-1.21104 34.8348 1.45637 40.34 6.23131 40.34H29.4845L29.7563 58.4432C29.8 61.3564 33.4783 62.6016 35.2908 60.324L34.8996 60.0127L35.2908 60.324L58.2521 31.4674C61.2241 27.7322 58.5568 22.227 53.782 22.227H30.3762L30.2571 4.12811Z",stroke:"hsl(var(--brand-default))",strokeWidth:2,strokeLinecap:"round","data-sentry-element":"path","data-sentry-source-file":"LogoLoader.tsx"})})})})},99799:function(e){e.exports={loading:"loading-anim_loading__rDN7u",dash:"loading-anim_dash__HIPR0"}}},function(e){e.O(0,[7034,2174,5518,7948,9774,2888,179],function(){return e(e.s=66709)}),_N_E=e.O()}]);