!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="51bac2f0-8ad2-4449-a72c-bc7d8bc2b077",e._sentryDebugIdIdentifier="sentry-dbid-51bac2f0-8ad2-4449-a72c-bc7d8bc2b077")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9578],{84515:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/editor",function(){return r(21960)}])},87211:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var s=r(31549),a=r(32733),n=r(82461);let l=e=>(0,s.jsx)(a.Zb,{className:"grow bg-surface-100 p-3 transition-colors hover:bg-surface-200 border border-light hover:border-default cursor-pointer",onClick:e.onClick,"data-sentry-element":"Card","data-sentry-component":"ActionCard","data-sentry-source-file":"ActionCard.tsx",children:(0,s.jsxs)("div",{className:"relative flex items-start gap-3",children:[e.isBeta&&(0,s.jsx)(n.C,{className:"absolute -right-5 -top-5 bg-surface-300 bg-opacity-100 text-xs text-foreground",children:"Coming soon"}),(0,s.jsx)("div",{className:"rounded-full ".concat(e.bgColor," w-8 h-8 flex items-center justify-center flex-shrink-0"),children:e.icon}),(0,s.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,s.jsx)("h3",{className:"text-sm text-foreground mb-0",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})},83607:function(e,t,r){"use strict";r.d(t,{R:function(){return O}});var s=r(31549),a=r(40540),n=r(50663),l=r.n(n),i=r(12486),o=r(57672),c=r.n(o),d=r(50378),u=r(56213),f=r(88042),x=r(61783),p=r(66218),m=r(11931),h=r(73343),j=r(87941),g=r(19732),b=r(28525),y=r(40827),v=r(79405),N=r(64888),w=r(51937),k=r(16154),C=r(25972),q=r(32081),_=r(29768),R=r(59928),E=r(87211),T=r(28977),I=r.n(T),U=r(60192),P=r.n(U),Z=r(76770),S=r(21626),A=r(48002),K=r(76909),z=r(3059);function D(){let{ref:e}=(0,f.UO)(),t=(0,z.Ek)(e),r=(0,A.R)(t),a=(0,_.f)();if(!(null==r?void 0:r.items)||!e)return null;let n=(a?r.items.filter(e=>N.zP[a].includes(e.type)):[...r.items]).sort((e,t)=>t.timestamp-e.timestamp);return(0,s.jsxs)("div",{className:"space-y-4","data-sentry-component":"RecentItems","data-sentry-source-file":"RecentItems.tsx",children:[(0,s.jsx)("h2",{className:"text-sm text-foreground",children:"Recent items"}),(0,s.jsx)("div",{className:"flex flex-col gap-0",children:0===n.length?(0,s.jsxs)(Z.E.div,{layout:!0,initial:!1,className:"flex flex-col items-center justify-center p-8 text-center border rounded-md border-muted gap-3",children:[(0,s.jsx)(K.F,{type:"r"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"No recent items yet"}),(0,s.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Items will appear here as you browse through your project"})]})]}):(0,s.jsx)(S.M,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-12 gap-y-0",children:n.map((t,r)=>{var a,n,l,i,o,d,u;return(0,s.jsx)(Z.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.012*r,duration:.15},children:(0,s.jsxs)(c(),{href:"/project/".concat(e,"/").concat("sql"===t.type?"sql/".concat(null===(a=t.metadata)||void 0===a?void 0:a.sqlId):"r"===t.type||"v"===t.type||"m"===t.type||"f"===t.type||"p"===t.type?"editor/".concat(null===(n=t.metadata)||void 0===n?void 0:n.tableId,"?schema=").concat(null===(l=t.metadata)||void 0===l?void 0:l.schema):"explorer/".concat(t.type,"/").concat(null===(i=t.metadata)||void 0===i?void 0:i.schema,"/").concat(null===(o=t.metadata)||void 0===o?void 0:o.name)),className:"flex items-center gap-4 rounded-lg bg-surface-100 py-2 transition-colors hover:bg-surface-200",children:[(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-surface-100 border",children:(0,s.jsx)(K.F,{type:t.type})}),(0,s.jsxs)("div",{className:"flex flex-1 gap-5 items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-foreground",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:null===(d=t.metadata)||void 0===d?void 0:d.schema}),(null===(u=t.metadata)||void 0===u?void 0:u.schema)&&(0,s.jsx)("span",{className:"text-foreground-light",children:"."}),(0,s.jsx)("span",{className:"text-foreground",children:t.label||"Untitled"})]}),(0,s.jsx)("div",{className:"bg-border-muted flex grow h-px"}),(0,s.jsx)("span",{className:"text-xs text-foreground-lighter",children:I()(t.timestamp).fromNow()})]})]})},t.id)})})})})]})}function O(){let e=(0,d.useRouter)(),{ref:t}=(0,f.UO)(),r=(0,_.f)(),n=(0,v._2)(),{profile:o}=(0,b.Un)(),[T]=l()(x.o,{type:"template"}),[I]=l()(x.o,{type:"quickstart"}),{mutate:U}=(0,m.a)(),P=(0,y.B0)(),{project:Z}=(0,R.d2)(),S=(0,j.l)(),A=(0,h.Xo)(a.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==o?void 0:o.id},subject:{id:null==o?void 0:o.id}}),K=[{icon:(0,s.jsx)(i.Z,{className:"h-4 w-4 text-foreground",strokeWidth:1.5}),title:"Create a table",description:"Design and create a new database table",bgColor:"bg-blue-500",isBeta:!1,onClick:n.onAddTable}],z=[{icon:(0,s.jsx)(w.KK,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),title:"New SQL Snippet",description:"Execute SQL queries",bgColor:"bg-green-500",isBeta:!1,onClick:()=>e.push("/project/".concat(t,"/sql/new"))}],O=async(r,s)=>{if(!t)return console.error("Project ref is required");if(!Z)return console.error("Project is required");if(!o)return console.error("Profile is required");if(!A)return(0,u.Am)("Your queries will not be saved as you do not have sufficient permissions");try{let a=(0,p.wI)({id:(0,g.k$)(),name:s,sql:r,owner_id:null==o?void 0:o.id,project_id:null==Z?void 0:Z.id});P.addSnippet({projectRef:t,snippet:a}),P.addNeedsSaving(a.id);let n=(0,N.yj)(t),l="sql-".concat(a.id);n.openTabs=[...n.openTabs,l],n.tabsMap[l]={id:l,type:"sql",label:s,metadata:{sqlId:a.id}},n.activeTab=l,e.push("/project/".concat(t,"/sql/").concat(a.id))}catch(e){u.Am.error("Failed to create new query: ".concat(e.message))}};return(0,s.jsxs)("div",{className:"bg-surface-100 h-full overflow-y-auto py-12","data-sentry-component":"NewTab","data-sentry-source-file":"NewTab.tsx",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col gap-10 px-10",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:("sql"===r?z:K).map((e,t)=>(0,s.jsx)(E.f,{...e},"action-card-".concat(t)))}),(0,s.jsx)(D,{"data-sentry-element":"RecentItems","data-sentry-source-file":"NewTab.tsx"})]}),"sql"===r&&(0,s.jsx)("div",{className:"flex flex-col gap-4 mx-auto py-10",children:(0,s.jsxs)(C.mQ,{defaultValue:"templates",children:[(0,s.jsxs)(C.dr,{className:"mx-auto justify-center gap-5",children:[(0,s.jsx)(C.SP,{value:"templates",children:"Templates"}),(0,s.jsx)(C.SP,{value:"quickstarts",children:"Quickstarts"})]}),(0,s.jsxs)(C.nU,{value:"templates",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:T.slice(0,9).map((e,r)=>(0,s.jsx)(E.f,{onClick:()=>{var r;O(e.sql,e.title),U({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!==(r=null==S?void 0:S.slug)&&void 0!==r?r:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(w.KK,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(r)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(q.z,{asChild:!0,type:"default",children:(0,s.jsx)(c(),{href:"/project/".concat(t,"/sql/templates"),children:"View more templates"})})})]}),(0,s.jsxs)(C.nU,{value:"quickstarts",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:I.map((e,r)=>(0,s.jsx)(E.f,{onClick:()=>{var r;O(e.sql,e.title),U({action:"sql_editor_quickstart_clicked",properties:{quickstartName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!==(r=null==S?void 0:S.slug)&&void 0!==r?r:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(w.KK,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(r)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(q.z,{asChild:!0,type:"default",children:(0,s.jsx)(c(),{href:"/project/".concat(t,"/sql/quickstarts"),children:"View more templates"})})})]})]})})]})}I().extend(P())},21960:function(e,t,r){"use strict";r.r(t);var s=r(31549),a=r(88042),n=r(86419),l=r(23191),i=r(92721),o=r(47226),c=r(75494),d=r(42636),u=r(99313),f=r(83607),x=r(50378),p=r(44194),m=r(59880),h=r(64888);let j=()=>{let e=(0,x.useRouter)(),{ref:t}=(0,a.UO)(),r=(0,h.yj)(t),o=(0,m.WZ)(),c=(0,n.B7)();return(0,p.useEffect)(()=>{if(c){let a=o.dashboardHistory.editor,n=r.openTabs.find(e=>{var t;return h.zP.table.includes(null===(t=r.tabsMap[e])||void 0===t?void 0:t.type)});if(void 0!==a)e.push("/project/".concat(t,"/editor/").concat(o.dashboardHistory.editor));else if(n){var s;let a=r.tabsMap[n];a&&e.push("/project/".concat(t,"/editor/").concat(null===(s=a.metadata)||void 0===s?void 0:s.tableId))}}},[c]),(0,s.jsxs)(s.Fragment,{children:[c?(0,s.jsx)(f.R,{}):(0,s.jsx)(l.Z,{}),(0,s.jsx)(i.Z,{onTableCreated:r=>{e.push("/project/".concat(t,"/editor/").concat(r.id))},"data-sentry-element":"SidePanelEditor","data-sentry-source-file":"index.tsx"})]})};j.getLayout=e=>(0,s.jsx)(o.Z,{children:(0,s.jsx)(c.t,{productMenu:(0,s.jsx)(u.Z,{}),product:"Table Editor",children:(0,s.jsx)(d.Z,{children:e})})}),t.default=j},32733:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return c},eW:function(){return d},ll:function(){return o}});var s=r(31549),a=r(44194),n=r(16154);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",r),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",r),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-xs font-mono uppercase",r),...a})});o.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-foreground-muted",r),...a})}).displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("py-4 px-6 border-b last:border-none",r),...a})});c.displayName="CardContent";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)(" flex items-center py-4 px-6",r),...a})});d.displayName="CardFooter"}},function(e){e.O(0,[6665,6046,7034,5890,622,6989,3311,7440,2019,6333,846,6931,8736,551,5089,3235,2174,5518,5770,5538,9853,3287,3500,2813,5852,977,7226,357,6916,459,3112,2004,8993,697,7582,2661,9774,2888,179],function(){return e(e.s=84515)}),_N_E=e.O()}]);